#!/usr/bin/env bash

dir="$(mktemp -d "$DOTS_SCRAP_DIR/go.XXX")"

markerfile=".scrap"
markerpath="$dir/$markerfile"

file="main.go"
path="$dir/$file"

{ cd "$dir" && go mod init "${dir##*\.}"; }

touch "$markerpath"
cat >"$path" <<EOL
// $ cd "$dir"; and go run "$file"

package main

func main() {}
EOL

nvim "$path"

#!/usr/bin/env bash

if test ! -d "$DOTS_SCRAP_DIR"; then
    echo "DOTS_SCRAP_DIR not found" >&2
    exit 1
fi

dir="$(mktemp -d "$DOTS_SCRAP_DIR/ts.XXXX")"
cd "$dir" || exit 1

file="main.ts"

cat >"$file" <<EOL
// $ cd "$dir"; and deno run "$file"

EOL

npm init --yes >/dev/null
touch deno.json
git init
git add -A
git commit -m "init"

nvim "$file"

##################################################
# bindsym format                                 #
##################################################
# mod + ...         => window/float related      #
# mod + shift + ... => window/float move related #
# mod + ctrl + ...  => lauching software         #
# mod + alt + ...   => modes                     #
##################################################

set $super Mod4
set $alt Mod1
set $locker lock

font pango:bitstream vera sans mono 10
floating_modifier $super
popup_during_fullscreen smart

for_window [class="^.*"] border pixel 0
gaps inner 7
smart_gaps on
smart_borders on

## bar settings
# main
bar {
    output LVDS1
    output HDMI2
    status_command i3status
    tray_output primary
    colors {
        separator #666666
        background #222222
        statusline #dddddd
        focused_workspace #0088CC #0088CC #ffffff
        active_workspace #333333 #333333 #ffffff
        inactive_workspace #333333 #333333 #888888
        urgent_workspace #2f343a #900000 #ffffff
    }
}

# second
bar {
    output VGA1
    status_command mpc_stream
    tray_output none
    colors {
        separator #666666
        background #222222
        statusline #dddddd
        focused_workspace #0088CC #0088CC #ffffff
        active_workspace #333333 #333333 #ffffff
        inactive_workspace #333333 #333333 #888888
        urgent_workspace #2f343a #900000 #ffffff
    }
}

## keybindings (window/float related)
bindsym $super+q kill
bindsym $super+f fullscreen toggle
bindsym $super+space floating toggle
bindsym $super+b move position center

bindsym $super+bracketleft move workspace to output left
bindsym $super+bracketright move workspace to output right

# change focus
bindsym $super+h focus left
bindsym $super+j focus down
bindsym $super+k focus up
bindsym $super+l focus right

# move focused window
bindsym $super+Left move left
bindsym $super+Down move down
bindsym $super+Up move up
bindsym $super+Right move right

# set split direction
bindsym $super+n split h
bindsym $super+m split v

# change container layout (stacked, tabbed, toggle split, focus parent)
bindsym $super+z layout stacking
bindsym $super+x layout tabbed
bindsym $super+c layout toggle split
bindsym $super+v focus parent

## keybindings (modes)
bindsym $super+$alt+r mode $mode_resize_tile
bindsym $super+$alt+space mode $mode_move_floating focus floating
bindsym $super+$alt+q mode $mode_system
bindsym $super+$alt+v mode $mode_audio
bindsym $super+$alt+i mode $mode_i3
bindsym $super+$alt+p mode $mode_pass
bindsym Print Mode $mode_scrot

set $mode_resize_tile "resize mode: [h][j][k][l]"
set $mode_move_floating "floating move mode: [h][j][k][l]"
set $mode_system  "system mode: [l]ock, log[o]ut, [s]uspend, [h]ibernate, [r]eboot, shut[d]own"
set $mode_i3  "i3 mode: e[x]it, [r]estart, reload [c]onfig"
set $mode_audio "volume mode: [+|Right] +5%/+10%,  [-|Left] +5%/+10%,  [m]ute,  [r]eset"
set $mode_scrot "screenshot mode: [n]ormal, [s]elect, [N]ormal upload, [S]elect upload"
set $mode_pass "pass mode: [m]anual, [u]ser, [p]assword, [b]oth"

# resizing tiles mode
mode $mode_resize_tile {
        bindsym h resize shrink width 10 px or 10 ppt
        bindsym j resize grow height 10 px or 10 ppt
        bindsym k resize shrink height 10 px or 10 ppt
        bindsym l resize grow width 10 px or 10 ppt

        bindsym Return mode "default"
        bindsym Escape mode "default"
}

# system power options mode
mode $mode_system {
    bindsym l exec --no-startup-id $locker, mode default
    bindsym s exec --no-startup-id $locker && systemctl suspend, mode default
    bindsym h exec --no-startup-id $locker && systemctl hibernate, mode default
    bindsym o exec --no-startup-id "i3-nagbar -t warning -m 'sure you want to log out?' -b 'yes' 'i3-msg exit'", mode "default"
    bindsym r exec --no-startup-id "i3-nagbar -t warning -m 'sure you want to reboot?' -b 'yes' 'systemctl reboot'", mode "default"
    bindsym d exec --no-startup-id "i3-nagbar -t warning -m 'sure you want to shutdown?' -b 'yes' 'systemctl poweroff'", mode "default"

    bindsym Return mode "default"
    bindsym Escape mode "default"
}

# i3 options mode
mode $mode_i3 {
    bindsym x exit
    bindsym r restart
    bindsym c reload

    bindsym Return mode "default"
    bindsym Escape mode "default"
}

# audio menu mode
mode $mode_audio {
    bindsym plus          exec --no-startup-id ponymix increase 5%
    bindsym minus         exec --no-startup-id ponymix decrease 5%
    bindsym KP_Add        exec --no-startup-id ponymix increase 5%
    bindsym KP_Subtract   exec --no-startup-id ponymix decrease 5%
    bindsym Right         exec --no-startup-id ponymix increase 10%
    bindsym Left          exec --no-startup-id ponymix decrease 10%
    bindsym m             exec --no-startup-id ponymix toggle
    bindsym r             exec --no-startup-id ponymix set-volume 100%

    bindsym Return mode "default"
    bindsym Escape mode "default"
}

# move floating windows mode
mode $mode_move_floating {
    bindsym h     move left
    bindsym j     move down
    bindsym k     move up
    bindsym l     move right

    bindsym Return mode "default"
    bindsym Escape mode "default"
}

# screenshot mode
mode $mode_scrot {
    bindsym n                 exec "screenshot",                                                                             mode "default"
    bindsym Shift+n           exec "screenshot | imgur_up | xclip && notify-send 'screenshot' 'link in clipboard'",          mode "default"
    bindsym --release s       exec "screenshot --select",                                                                    mode "default"
    bindsym --release Shift+s exec "screenshot --select | imgur_up | xclip && notify-send 'screenshot' 'link in clipboard'", mode "default"

    bindsym Return mode "default"
    bindsym Escape mode "default"
}

# pass mode
mode $mode_pass {
    bindsym m exec dmenu_pass,                 mode "default"
    bindsym u exec dmenu_pass --tuser,         mode "default"
    bindsym p exec dmenu_pass --tpass,         mode "default"
    bindsym b exec dmenu_pass --tuser --tpass, mode "default"

    bindsym Return mode "default"
    bindsym Escape mode "default"
}

## workspaces
set $work1 "1 main "
set $work2 "2 web "
set $work3 "3 term "
set $work4 "4 music "
set $work5 "5 video "
set $work6 "6 irc "
set $work7 "7 mnem "
set $work8 "8 gimp "
set $work9 "9 office "

# switch to workspace
bindsym $super+1 workspace $work1
bindsym $super+2 workspace $work2
bindsym $super+3 workspace $work3
bindsym $super+4 workspace $work4
bindsym $super+5 workspace $work5
bindsym $super+6 workspace $work6
bindsym $super+7 workspace $work7
bindsym $super+8 workspace $work8
bindsym $super+9 workspace $work9

bindsym $super+0 [urgent=latest] focus
bindsym $super+grave workspace back_and_forth

# move focused container to workspace
bindsym $super+Shift+1 move container to workspace $work1
bindsym $super+Shift+2 move container to workspace $work2
bindsym $super+Shift+3 move container to workspace $work3
bindsym $super+Shift+4 move container to workspace $work4
bindsym $super+Shift+5 move container to workspace $work5
bindsym $super+Shift+6 move container to workspace $work6
bindsym $super+Shift+7 move container to workspace $work7
bindsym $super+Shift+8 move container to workspace $work8
bindsym $super+Shift+9 move container to workspace $work9

## keeping programs on workspaces
assign [class="Firefox"] $work2
assign [class="chromium"] $work2
assign [class="URxvt" instance="ncmpcpp"] $work4
assign [class="URxvt" instance="weechat"] $work6
assign [class="mpv"] $work5
assign [class="Mnemosyne"] $work7
assign [class="Gimp*"] $work8
assign [class="libreoffice-*"] $work9

# floating
for_window [class="Pavucontrol"] floating enable
for_window [class="Mnemosyne"]   floating enable
for_window [class="Galculator"]  floating enable

# floating generic
for_window [window_type="menu"]        floating enable
for_window [window_role="app"]         floating enable
for_window [window_role="pop-up"]      floating enable
for_window [window_role="task_dialog"] floating enable
for_window [window_type="dialog"]      floating enable
for_window [title="Preferences$"]      floating enable

## special rules
for_window [class="feh"] fullscreen enable
for_window [class="mpv"] fullscreen enable

## keybindings (scratchpad)
bindsym F15        [class="URxvt" instance="^scratch$"] scratchpad show, move position center

## keeping programs floating/fullscreen
for_window [class="URxvt" instance="^nmtui$"]     floating enable, resize set 795 589,  move position center
for_window [class="URxvt" instance="^scratch$"] floating enable, resize set 1292 694, move scratchpad, border pixel 2

## keybindings (programs)
bindsym $super+Ctrl+e exec thunar
bindsym $super+Ctrl+b exec chromium
bindsym $super+Ctrl+g exec galculator
bindsym $super+Ctrl+v exec pavucontrol
bindsym $super+Ctrl+a exec dmenu_pacs
bindsym $super+Ctrl+f exec dmenu_sinks
bindsym $super+Ctrl+r exec dmenu_radio
bindsym $super+Ctrl+h exec dmenu_clipboard

bindsym $super+Return exec urxvtc
bindsym $super+Ctrl+m exec urxvtc -depth 16 -name ncmpcpp -e ncmpcpp
bindsym $super+Ctrl+i exec urxvtc -bg "#000022" -name weechat -hold -e bash -c irc
bindsym $super+Ctrl+c exec urxvtc -name nmtui -e nmtui connect
bindsym $super+Ctrl+n exec urxvtc -name nmtui -e nmtui edit

# keybindings (xf86 on thinkpad x220)
bindsym XF86TouchpadToggle exec --no-startup-id thinkpad-touchpad && notify-send "touchpad toggled"
bindsym XF86WLAN exec urxvtc -name nmtui -e nmtui
bindsym XF86Display exec --no-startup-id projector

bindsym XF86ScreenSaver exec --no-startup-id $locker
bindsym XF86Suspend exec --no-startup-id $locker && systemctl hibernate
bindsym XF86Sleep exec --no-startup-id $locker && systemctl suspend

bindsym XF86MonBrightnessUp exec --no-startup-id xbacklight -inc 20
bindsym XF86MonBrightnessDown exec --no-startup-id  xbacklight -dec 20

bindsym XF86AudioRaiseVolume exec --no-startup-id ponymix increase 5%
bindsym XF86AudioLowerVolume exec --no-startup-id ponymix decrease 5%
bindsym XF86AudioMute exec --no-startup-id ponymix toggle
bindsym XF86AudioMicMute exec --no-startup-id thinkpad-mutemic

bindsym XF86AudioPlay exec --no-startup-id ctl_player toggle
bindsym XF86AudioStop exec --no-startup-id ctl_player stop
bindsym XF86AudioNext exec --no-startup-id ctl_player next
bindsym XF86AudioPrev exec --no-startup-id ctl_player prev

# colours               # bord  # bg    # text  # indic
client.focused          #dddddd #ffffff #000000 #dddddd
client.focused_inactive #333333 #333333 #888888 #292d2e
client.unfocused        #333333 #333333 #888888 #292d2e
client.urgent           #2f343a #900000 #ffffff #900000

exec --no-startup-id scratch

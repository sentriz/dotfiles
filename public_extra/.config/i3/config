#############################################
# bindsym format                            #
#############################################
# mod + ...         => window/float related #
# mod + shift + ... => i3 related           #
# mod + ctrl + ...  => lauching software    #
# mod + alt + ...   => modes                #
#############################################

set $super Mod4
set $alt Mod1
font pango:bitstream vera sans mono 10
floating_modifier $super

## border rules
new_window none
new_float none

## bar settings
bar {
        status_command i3status
        tray_output VGA-0
}

## keybindings (i3 related)
bindsym $super+Shift+r restart

## keybindings (window/float related)
bindsym $super+q kill
bindsym $super+f fullscreen toggle
bindsym $super+space floating toggle

# change focus
bindsym $super+h focus left
bindsym $super+j focus down
bindsym $super+k focus up
bindsym $super+l focus right

# move focused window
bindsym $super+Left move left
bindsym $super+Down move down
bindsym $super+Up move up
bindsym $super+Right move right

# set split direction
bindsym $super+n split h
bindsym $super+m split v

# change container layout (stacked, tabbed, toggle split)
bindsym $super+z layout stacking
bindsym $super+x layout tabbed
bindsym $super+c layout toggle split

## keybindings (modes)
bindsym $super+$alt+r mode $mode_resize_tile
bindsym $super+$alt+space mode $mode_move_floating focus floating
bindsym $super+$alt+q mode $mode_system
bindsym $super+$alt+v mode $mode_audio

# resizing tiles mode
set $mode_resize_tile "resize window: [h][j][k][l]"
mode $mode_resize_tile {
        bindsym h resize shrink width 10 px or 10 ppt
        bindsym j resize grow height 10 px or 10 ppt
        bindsym k resize shrink height 10 px or 10 ppt
        bindsym l resize grow width 10 px or 10 ppt

        bindsym Return mode "default"
        bindsym Escape mode "default"
}

# system power options mode
set $mode_system  "[l]ock, log[o]ut, [s]uspend, [h]ibernate, [r]eboot, shut[d]own"
mode $mode_system {
    bindsym l exec --no-startup-id i3lf, mode "default"
    bindsym o exec --no-startup-id "i3-nagbar -t warning -m 'sure you want to log out?' -b 'yes' 'i3-msg exit'", mode "default"
    bindsym s exec --no-startup-id i3lock, mode default; exec --no-startup-id /bin/systemctl suspend, mode "default"
    bindsym h exec --no-startup-id i3lock, mode default; exec --no-startup-id /bin/systemctl hibernate, mode "default"
    bindsym r exec --no-startup-id "i3-nagbar -t warning -m 'sure you want to reboot?' -b 'yes' '/bin/systemctl reboot'", mode "default"
    bindsym d exec --no-startup-id "i3-nagbar -t warning -m 'sure you want to shutdown?' -b 'yes' '/bin/systemctl poweroff'", mode "default"

    bindsym Return mode "default"
    bindsym Escape mode "default"
}

# audio menu mode
set $mode_audio "volume: [+]10%,  [-]10%,  [m]ute,  [r]eset"
mode $mode_audio {
    bindsym plus          exec --no-startup-id pactl set-sink-volume @DEFAULT_SINK@ +10%
    bindsym minus         exec --no-startup-id pactl set-sink-volume @DEFAULT_SINK@ -10%
    bindsym KP_Add        exec --no-startup-id pactl set-sink-volume @DEFAULT_SINK@ +10%
    bindsym KP_Subtract   exec --no-startup-id pactl set-sink-volume @DEFAULT_SINK@ -10%
    bindsym Right         exec --no-startup-id pactl set-sink-volume @DEFAULT_SINK@ +10%
    bindsym Left          exec --no-startup-id pactl set-sink-volume @DEFAULT_SINK@ -10%
    bindsym m             exec --no-startup-id pactl set-sink-mute @DEFAULT_SINK@ toggle
    bindsym r             exec --no-startup-id pactl set-sink-volume @DEFAULT_SINK@ 100%

    bindsym Return mode "default"
    bindsym Escape mode "default"
}

# move floating windows mode
set $mode_move_floating "move floating: [h][j][k][l]"
mode $mode_move_floating {
    bindsym $super+Tab focus right

    bindsym h     move left
    bindsym j     move down
    bindsym k     move up
    bindsym l     move right

    bindsym Return mode "default"
    bindsym Escape mode "default"
}

## colours
set $base00 #101218
set $base01 #1f222d
set $base02 #252936
set $base03 #7780a1
set $base04 #C0C5CE
set $base05 #d1d4e0
set $base06 #C9CCDB
set $base07 #ffffff
set $base08 #ee829f
set $base09 #f99170
set $base0A #ffefcc
set $base0B #a5ffe1
set $base0C #97e0ff
set $base0D #97bbf7
set $base0E #c0b7f9
set $base0F #fcc09e

# widow colours
#                       border  background text    indicator
client.focused          $base01 $base01    $base07 $base01
client.focused_inactive $base02 $base02    $base03 $base02
client.unfocused        $base02 $base02    $base03 $base02
client.urgent           $base02 $base08    $base00 $base02


## workspaces
set $work1 "1 main "
set $work2 "2 web "
set $work3 "3 term "
set $work4 "4 music "
set $work5 "5 keepass "
set $work6 "6 irc "
set $work7 "7 mnem "
set $work8 "8"
set $work9 "9"

# switch to workspace
bindsym $super+1 workspace $work1
bindsym $super+2 workspace $work2
bindsym $super+3 workspace $work3
bindsym $super+4 workspace $work4
bindsym $super+5 workspace $work5
bindsym $super+6 workspace $work6
bindsym $super+7 workspace $work7
bindsym $super+8 workspace $work8
bindsym $super+9 workspace $work9

# move focused container to workspace
bindsym $super+Shift+1 move container to workspace $work1
bindsym $super+Shift+2 move container to workspace $work2
bindsym $super+Shift+3 move container to workspace $work3
bindsym $super+Shift+4 move container to workspace $work4
bindsym $super+Shift+5 move container to workspace $work5
bindsym $super+Shift+6 move container to workspace $work6
bindsym $super+Shift+7 move container to workspace $work7
bindsym $super+Shift+8 move container to workspace $work8
bindsym $super+Shift+9 move container to workspace $work9

# startup programs
exec_always --no-startup-id feh --bg-scale /home/senan/.wallpaper.jpg
exec_always --no-startup-id compton -b
exec        --no-startup-id urxvtd
exec        --no-startup-id nm-applet
exec        --no-startup-id mpd
exec        --no-startup-id mpdscribble
exec        --no-startup-id pasystray
exec        --no-startup-id mnemosyne
exec        --no-startup-id megasync

# lock screen after 15 minutes
exec xautolock -time 10 -locker '~/bin/i3lf' &

# keeping programs on workspaces
assign [class="Firefox"] $work2
assign [class="chromium"] $work2
assign [class="KeePass2"] $work5
assign [class="URxvt" instance="ncmpcpp"] $work4
assign [class="Wine" instance="foobar2000.exe"] $work4
assign [class="URxvt" instance="weechat"] $work6
assign [class="Mnemosyne"] $work7

# keeping programs floating/fullscreen
for_window [class="Pavucontrol"] floating enable
for_window [class="Mnemosyne"] floating enable
for_window [class="feh"] fullscreen enable

for_window [window_type="menu"] floating enable
for_window [window_role="app"] floating enable
for_window [window_role="pop-up"] floating enable
for_window [window_role="task_dialog"] floating enable
for_window [title="Preferences$"] floating enable

# dialog rules
for_window [window_type="dialog"] floating enable, move position center
for_window [window_type="dialog"] floating_minimum_size 75 x 20
popup_during_fullscreen smart

# youfl script custom (~/bin/youfl)
for_window [title="youfl_stream"] fullscreen disable, floating enable, resize set 640 px 360 px, sticky enable, move window to position 726 px 0 px
# values:                                                                         ^a^    ^b^                                            ^c^
# c = monitorwidth - a      (width is 1366 for me)                                ^a^    ^b^                                            ^c^
# b = 9a/16                 (for 16:9 default size)                               ^a^    ^b^                                            ^c^

# keybindings (sreenshotting)
bindsym Print                 exec scrot '%Y%m%d_%H%M%S.png' -e 'mv $f /mnt/storage/media/pictures/screenshots'
bindsym shift+Print --release exec scrot '%Y%m%d_%H%M%S.png' -s -e 'mv $f /mnt/storage/media/pictures/screenshots'

# keybindings (programs)
bindsym $super+Return exec urxvtc
bindsym $super+Ctrl+m exec urxvtc -name ncmpcpp -e ncmpcpp -s playlist
bindsym $super+Ctrl+i exec urxvtc -name weechat -e irc
bindsym $super+Ctrl+e exec nautilus
bindsym $super+Ctrl+b exec chromium
bindsym $super+Ctrl+k exec keepass
bindsym $super+Ctrl+a exec j4-dmenu-desktop

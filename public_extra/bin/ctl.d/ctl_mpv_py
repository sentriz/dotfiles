#!/usr/bin/env python3

import os
import socket
import json

socket_path = os.path.expanduser("~/.config/mpv/socket")

def connect():
    client = socket.socket(socket.AF_UNIX, socket.SOCK_STREAM)
    client.connect(socket_path)
    return client

def send_cmd():
    client = connect()
    request = '{"command": ["get_property", "media-title"]}\n'
    client.send(request.encode())
    return json.loads(client.recv(1024).decode())["data"]

print(send_cmd())

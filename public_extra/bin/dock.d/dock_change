#!/bin/bash

# be sure to have to following sudoers:
# senan     ALL=(root) NOPASSWD:/path/to/this

if [ "$(id -u)" != "0" ]; then
  exec sudo "$0" "$@" 
fi

sleep 1

if grep -q "1" /sys/devices/platform/dock.*/docked; then
    # dock

    /home/senan/bin/projector
    /home/senan/.fehbg
    touch /tmp/docked

else 
    # undock

    /home/senan/bin/projector --single
    /home/senan/.fehbg
    rm /tmp/docked

fi

#!/usr/bin/wpexec

-- # selene: allow(undefined_variable, unscoped_variables)
-- # vim: ft=lua

local args = (...)

local class = args.sink and "Audio/Sink" or "Audio/Source"
local om = ObjectManager({
	Interest({ type = "node", Constraint({ "media.class", "=", class, type = "pw-global" }) }),
})

om:connect("objects-changed", function()
	for n in om:iterate() do
		print(n.properties["node.name"])
	end
	Core.quit()
end)
om:activate()

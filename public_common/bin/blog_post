#!/usr/bin/env fish

if test (count $argv) -eq 0
    echo need name of post >&2
    exit 1
end
set -l name (echo "$argv" | sed 's/ /-/g')
set -l date (date +%F)
set -l folder "~/dev/github/xyz/_posts"
if test ! -e "$folder"
    echo "post folder doesn't exist" >&2
    exit 1
end
set -l file "$folder/$date-$name.md"
touch "$file"
echo -e "---\ntitle:  \n---" > "$file"
vim +2 -c 'normal $' "$file"
